---
//@ts-nocheck
import Layout from "/src/layouts/Layout.astro";
export async function getStaticPaths() {
  const url =
    "https://cbspsmpkfjialzthyppy.supabase.co/rest/v1/events?select=*";
  const key =
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNic3BzbXBrZmppYWx6dGh5cHB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQyNjc3NzIsImV4cCI6MjA1OTg0Mzc3Mn0.uT6SjEaiJR1sSTevguX9qaKc7UK3EGLiF-_PjHwOS94";

  const options = {
    headers: { apikey: key },
  };
  const data = await fetch(url, options).then((res) => res.json());
  console.log(data);

  return data.map((event) => {
    return {
      params: { slug: event.event_slug },
      props: { event },
    };
  });
}

const { event } = Astro.props;
---

<Layout title={event.event_title}>
  <h1>{event.event_title}</h1>
</Layout>
